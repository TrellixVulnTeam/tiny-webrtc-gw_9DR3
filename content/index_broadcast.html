<html>
<head>
<link rel="stylesheet" type="text/css" href="conference.css">
</head>

<body onLoad="broadcastOnLoad()">
<div id="mainDiv">
    <table border=1 id="mainDivTable">
        <tr style='height:5%;'>
            <th colspan=2>gitHub:<a href='https://github.com/justinb01981/tiny-webrtc-gw/wiki'>https://github.com/justinb01981/tiny-webrtc-gw/wiki</a></th>
        </tr>

        <tr id='rowChat' style='height:5%'>
            <td colspan=2 align='center'>
                username:<textarea rows=1 cols=16 id='userName'>user123</textarea>
                <button onclick='location="login.html"' id='login'>login</button>
                <button onclick='logout();' id='logout'>logout</button>
                <br>

                <!--
                <iframe name='channelFrame' width='100%' height='33%' src='iframe_channel.html'>
                <form name='channelForm' action='subscribe' method='POST' target='_parent'>
                <input type='text' name='subscriptionID'></input>
                <button onclick='channelPost();'>channel</button>
                </form>
                </iframe>
                -->
           </td>
        </tr>

        <tr style='height:5%;'>
            <th colspan=1>Meeting Room</th><th colspan=1>Local</th>
        </tr>
        <tr style='height:30%;'>
            <td colspan=1 id="thPresenter" align="center" >
                    <video class="videoMain" id='videoMain' autoplay controls style='width:100%;'></video>

            </td>
            <td colspan=1 align="center">
                <div id="localPreviewDiv">
                    <video class="videoLocal" id="localVideo" controls autoplay muted style='width:100%;'></video>
                </div>
                <div id="remoteVideoMirrorDiv" hidden=true>
                    <video class="videoLocal" id="remoteVideoMirror" controls autoplay muted style='width:100%;'>
                    </video>
                    <h1>
                        Recording: yes
                    </h2>
                </div>
                <!--
                <button onclick="document.getElementById('remoteVideoMirrorDiv').hidden = false; document.getElementById('localPreviewDiv').hidden = true; connectVideo(document.getElementById('remoteVideoMirror'), false, '');">Join/Restart</button>
                -->
            </td>
        </tr>

        <tr style='height:5%; width:100%; overflow:scroll;'>
            <td style='border-width:0px;' align='right'>
                Room:
                <input type='text' id='roomName' onInput='roomEdited(this)'>
                </input>
                <input type='button' value='+' onClick='onAdvanced(this)'>
                </input>
            </td>
            <td style='border-width:0px;' align='left'>
                <iframe style='height:25%; width:50%; overflow:scroll; border-width:0px;' name='connectIframe' src='connect_iframe.html' id='connect_iframe'>
                </iframe>


                <!--
                <button id='joinButton' onClick='startLiveBcast(this)'>
                    Join
                </button>
                -->
            </td>
        </tr>

        <tr style='height:45%;'>
           <td colspan=2 align='center'>
                <iframe name='chatFrame' src='chat.html' width='100%; height:100%; overflow:scroll;'>
                </iframe>
            </td>
        </tr>

        <!--
        <tr>
            <td>
                <table border=1 style="display:inline-block;">
                    <tr>
                        <td>
                            <img src='newUser.jpg'>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button onClick='onBtnAddUser("");'>Add User</button>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
	-->

    </table>

</div> <!-- mainDiv -->
</body>

<script src="src/js/adapter.js"></script>
<script src="src/js/lib/ga.js"></script>
<script src="js/popup.js"></script>
<script src="js/peers.js"></script>
<script src="js/broadcast.js"></script>
<script src="js/peerdynamic.js"></script>
<script language="javascript">

var onLeave;

function joinSDP() {
    return "empty";
}

function onLoadDone() {
    var urlUserArg = '%$URLARGUMENTSNAME$%';
    var urlRoomArg = '%$URLARGUMENTSROOM$%';
    if(urlRoomArg.length > 0) {
        disconnectVideo(document.getElementById('videoMain'));
        connectVideo(document.getElementById('videoMain'), true, urlRoomArg);
    }

    onLeave = function() {
        disconnectVideo(document.getElementById('videoMain'));
    }

    onJoinPending = function() {
    }
}

function onAdvanced(button) {
    var iframe = document.getElementById('connect_iframe');

    if(button.value == '-')
    {
        iframe.style.cssText = 'z-index:1; position:static; height:25%; overflow:scroll;';
        button.value = '+';
    }
    else
    {
        iframe.style.cssText = 'z-index:1; position:fixed; height:200%; overflow:scroll; background-color:white; ';
        button.value = '-';
    }
}

// don't add things here, do that in broadcast.js
</script>

</html>
