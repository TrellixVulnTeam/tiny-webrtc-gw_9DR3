<html>
<head>
<link rel="stylesheet" type="text/css" href="conference.css">
</head>

<body onLoad="broadcastOnLoad()">
<div id="mainDiv">
    <table border=1 id="mainDivTable">
        <tr style='height:50px;'>
            <th colspan=2>gitHub:<a href='https://github.com/justinb01981/tiny-webrtc-gw'>https://github.com/justinb01981/tiny-webrtc-gw</a></th>
        </tr>
        <tr style='height:50px;'>
            <th colspan=1>Presenter</th><th colspan=1>Local</th>
        </tr>
        <tr>
            <td colspan=1 id="thPresenter" align="center" >
               <div id='addUserLinkDiv'>
                   <h3>Click to start watching "%$URLARGUMENTS$%"</h3>
                   <button onClick="connectVideo(document.getElementById('videoMain'), joinSDP(), true, '%$URLARGUMENTS$%');" style="">Click to start watching</button>
                </div>
                <!--
                <div id="presenterDiv">
                -->
                    <video class="videoMain" id='videoMain' autoplay width=640 height=480></video>
                <!--
                </div>
                -->
                <!--
                <button onclick='mainVideoEmbiggen(120);'>+</button>
                <button onclick='mainVideoEmbiggen(80);'>-</button>
                -->
            </td>
            <td colspan=1 align="center">
                <div id="localPreviewDiv">
                    <video class="videoLocal" id="localVideo" controls autoplay muted></video>
                    <P>Join to begin streaming...
                </div>

                <iframe src='iframe_video.html' id='iframe_video' width=10 height=10>
                </iframe>
                <div id="remoteVideoMirrorDiv" hidden=true>
                    <P>Join Succesful:
                    <br>
                    <video class="videoLocal" id="remoteVideoMirror" controls autoplay muted width=320 height=240></video>
                    <br>
                    <P>Streaming...
                    <br>
                    <!--
                    <button onclick="stopSending()">pause/resume</button>
                    <br>
                    <button onclick="alert('switch tabs back/forth (on andrid/chrome)\nmake sure correct video device selected'); rebootLocalVideo(document.getElementById('remoteVideoMirror'));">problem?</button>
                    -->
                    <div id="streamLinkDiv">
                    </div>
                </div>
                <button onclick="document.getElementById('remoteVideoMirrorDiv').hidden = false; document.getElementById('localPreviewDiv').hidden = true; connectVideo(document.getElementById('remoteVideoMirror'), joinSDP(), false, '');">Join/Restart</button>
                <br>
            </td>
        </tr>

        <tr>
            <td colspan=2 align='center'>
                Chat username:<textarea rows=1 cols=16 id='userName'>user123</textarea>
                <button onclick='openChat();'>chat</button>
                <button onclick='logout();'>logout</button>
                <br>

                <div id='channelDiv'>
                    <iframe name='channelFrame' width='100px' height='100px' src='iframe_channel.html'>
                    <form name='channelForm' action='subscribe' method='POST' target='_parent'>
                    <input type='text' name='subscriptionID'></input>
                    <button onclick='channelPost();'>channel</button>
                    </form>
                    </iframe>
                </div>
           </td>
        </tr>
        <tr>
           <td colspan=2 align='center'>
        
                <iframe name='chatFrame' src='chat.html' width='100%' height='100%'>
                </iframe>
            </td>
        </tr>

        <!--
        <tr>
            <td>
                <table border=1 style="display:inline-block;">
                    <tr>
                        <td>
                            <img src='newUser.jpg'>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button onClick='onBtnAddUser("");'>Add User</button>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
	-->

    </table>
</div> <!-- mainDiv -->
</body>

<script src="src/js/adapter.js"></script>
<script src="js/sdp.js"></script>

<script src="src/js/lib/ga.js"></script>
<script src="js/popup.js"></script>
<script src="js/peers.js"></script>
<script src="js/broadcast.js"></script>
<script language="javascript">
function onLoadDone() {
    var urlUserArg = '%$URLARGUMENTS$%';
    if(urlUserArg.length > 0) {
        
        connectVideo(document.getElementById('videoMain'), joinSDP(), true, urlUserArg);
    }
}
</script>

</html>
